(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{2474:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cliente/registrar",function(){return a(4838)}])},5376:function(e,r,a){"use strict";a.d(r,{Z:function(){return l}});var n=a(5893),t=a(1163),i=a(7294);function l(){let[e,r]=(0,i.useState)(null),a=(0,t.useRouter)();if((0,i.useEffect)(()=>{let e=localStorage.getItem("user");e?r(JSON.parse(e)):a.push("/login")},[a]),!e)return null;let l=[];return"admin"===e.role?l.push({label:"Dashboard",href:"/dashboard"},{label:"Gesti\xf3n de Usuarios",href:"/admin/usuarios"},{label:"Gesti\xf3n de Empresas",href:"/admin/empresas"},{label:"Mis Clientes",href:"/cliente/clientes"},{label:"Carga Masiva",href:"/cliente/carga-masiva"},{label:"Barridos",href:"/admin/barridos"},{label:"Matrices de Riesgo",href:"/admin/matrices"},{label:"Cambiar Contrase\xf1a",href:"/cambiar-contrasena"}):"consultor"===e.role?l.push({label:"Dashboard",href:"/dashboard"},{label:"Empresas",href:"/consultor/empresas"},{label:"Mis Clientes",href:"/cliente/clientes"},{label:"Carga Masiva",href:"/cliente/carga-masiva"},{label:"Alertas",href:"/consultor/alertas"},{label:"Reportes",href:"/consultor/reportes"},{label:"Cambiar Contrase\xf1a",href:"/cambiar-contrasena"}):"cliente"===e.role&&l.push({label:"Dashboard",href:"/dashboard"},{label:"Mis Clientes",href:"/cliente/clientes"},{label:"Carga Masiva",href:"/cliente/carga-masiva"},{label:"Transacciones",href:"/cliente/transacciones"},{label:"Reportes",href:"/cliente/reportes"},{label:"Cambiar Contrase\xf1a",href:"/cambiar-contrasena"}),(0,n.jsxs)("nav",{style:{backgroundColor:"#1e40af",padding:"1rem",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("div",{children:(0,n.jsx)("h2",{style:{margin:0,fontSize:"1.2rem"},children:"admin"===e.role?"Consola Administrativa":"consultor"===e.role?"Panel Consultor":"Portal Cliente"})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"0.9rem"},children:[e.email," (",e.role,")"]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[l.map(e=>(0,n.jsx)("button",{onClick:()=>a.push(e.href),style:{color:"white",background:"none",border:"none",cursor:"pointer",textDecoration:a.pathname===e.href?"underline":"none"},children:e.label},e.href)),(0,n.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a.push("/login")},style:{color:"#f87171",background:"none",border:"none",cursor:"pointer"},children:"Cerrar Sesi\xf3n"})]})]})]})}},4838:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return o}});var n=a(5893),t=a(7294),i=a(1163),l=a(7066),s=a(5376);function o(){let[e,r]=(0,t.useState)({nombre_entidad:"",tipo_cliente:"persona_fisica",actividad_economica:"",empresa_id:""}),[a,o]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),b=(0,i.useRouter)();(0,t.useEffect)(()=>{let e=localStorage.getItem("user");if(e){let a=JSON.parse(e);m(a.role),"cliente"===a.role&&a.empresaId&&(p(a.empresaId),r(e=>({...e,empresa_id:a.empresaId.toString()})))}},[]);let f=async r=>{r.preventDefault();let a=localStorage.getItem("token");if(!a){b.push("/login");return}try{await l.Z.post("/api/cliente/registrar",e,{headers:{Authorization:"Bearer ".concat(a)}}),d("Cliente registrado exitosamente"),setTimeout(()=>b.push("/cliente/clientes"),1500)}catch(e){var n,t;o((null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.error)||"Error al registrar cliente")}},g=e=>{let{name:a,value:n}=e.target;r(e=>({...e,[a]:n}))};return(0,n.jsxs)("div",{children:[(0,n.jsx)(s.Z,{}),(0,n.jsxs)("div",{style:{padding:"2rem"},children:[(0,n.jsx)("h1",{children:"Registrar Cliente"}),a&&(0,n.jsx)("p",{style:{color:"red"},children:a}),c&&(0,n.jsx)("p",{style:{color:"green"},children:c}),(0,n.jsxs)("form",{onSubmit:f,children:[(0,n.jsx)("div",{style:{marginBottom:"1rem"},children:(0,n.jsxs)("label",{children:["Nombre del Cliente: ",(0,n.jsx)("input",{name:"nombre_entidad",value:e.nombre_entidad,onChange:g,required:!0,style:{width:"100%",padding:"0.5rem"}})]})}),(0,n.jsx)("div",{style:{marginBottom:"1rem"},children:(0,n.jsxs)("label",{children:["Tipo de Cliente:",(0,n.jsxs)("select",{name:"tipo_cliente",value:e.tipo_cliente,onChange:g,style:{width:"100%",padding:"0.5rem"},children:[(0,n.jsx)("option",{value:"persona_fisica",children:"Persona F\xedsica"}),(0,n.jsx)("option",{value:"persona_moral",children:"Persona Moral"})]})]})}),(0,n.jsx)("div",{style:{marginBottom:"1rem"},children:(0,n.jsxs)("label",{children:["Actividad Econ\xf3mica: ",(0,n.jsx)("input",{name:"actividad_economica",value:e.actividad_economica,onChange:g,required:!0,style:{width:"100%",padding:"0.5rem"}})]})}),"cliente"!==u&&(0,n.jsx)("div",{style:{marginBottom:"1rem"},children:(0,n.jsxs)("label",{children:["ID de Empresa: ",(0,n.jsx)("input",{name:"empresa_id",value:e.empresa_id,onChange:g,required:!0,type:"number",style:{width:"100%",padding:"0.5rem"}})]})}),(0,n.jsx)("button",{type:"submit",style:{padding:"0.5rem 1rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Registrar"})]})]})]})}},1163:function(e,r,a){e.exports=a(9090)}},function(e){e.O(0,[66,888,774,179],function(){return e(e.s=2474)}),_N_E=e.O()}]);