(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[148],{5809:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cambiar-contrasena",function(){return r(6057)}])},5376:function(e,a,r){"use strict";r.d(a,{Z:function(){return o}});var n=r(5893),t=r(1163),s=r(7294);function o(){let[e,a]=(0,s.useState)(null),r=(0,t.useRouter)();if((0,s.useEffect)(()=>{let e=localStorage.getItem("user");e?a(JSON.parse(e)):r.push("/login")},[r]),!e)return null;let o=[];return"admin"===e.role?o.push({label:"Dashboard",href:"/dashboard"},{label:"Gesti\xf3n de Usuarios",href:"/admin/usuarios"},{label:"Gesti\xf3n de Empresas",href:"/admin/empresas"},{label:"Mis Clientes",href:"/cliente/clientes"},{label:"Carga Masiva",href:"/cliente/carga-masiva"},{label:"Barridos",href:"/admin/barridos"},{label:"Matrices de Riesgo",href:"/admin/matrices"},{label:"Cambiar Contrase\xf1a",href:"/cambiar-contrasena"}):"consultor"===e.role?o.push({label:"Dashboard",href:"/dashboard"},{label:"Empresas",href:"/consultor/empresas"},{label:"Mis Clientes",href:"/cliente/clientes"},{label:"Carga Masiva",href:"/cliente/carga-masiva"},{label:"Alertas",href:"/consultor/alertas"},{label:"Reportes",href:"/consultor/reportes"},{label:"Cambiar Contrase\xf1a",href:"/cambiar-contrasena"}):"cliente"===e.role&&o.push({label:"Dashboard",href:"/dashboard"},{label:"Mis Clientes",href:"/cliente/clientes"},{label:"Carga Masiva",href:"/cliente/carga-masiva"},{label:"Transacciones",href:"/cliente/transacciones"},{label:"Reportes",href:"/cliente/reportes"},{label:"Cambiar Contrase\xf1a",href:"/cambiar-contrasena"}),(0,n.jsxs)("nav",{style:{backgroundColor:"#1e40af",padding:"1rem",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("div",{children:(0,n.jsx)("h2",{style:{margin:0,fontSize:"1.2rem"},children:"admin"===e.role?"Consola Administrativa":"consultor"===e.role?"Panel Consultor":"Portal Cliente"})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"0.9rem"},children:[e.email," (",e.role,")"]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[o.map(e=>(0,n.jsx)("button",{onClick:()=>r.push(e.href),style:{color:"white",background:"none",border:"none",cursor:"pointer",textDecoration:r.pathname===e.href?"underline":"none"},children:e.label},e.href)),(0,n.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),r.push("/login")},style:{color:"#f87171",background:"none",border:"none",cursor:"pointer"},children:"Cerrar Sesi\xf3n"})]})]})]})}},6057:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return i}});var n=r(5893),t=r(7294),s=r(1163),o=r(7066),l=r(5376);function i(){let[e,a]=(0,t.useState)({contrasenaActual:"",nuevaContrasena:"",confirmarContrasena:""}),[r,i]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),d=(0,s.useRouter)(),h=e=>{let{name:r,value:n}=e.target;a(e=>({...e,[r]:n}))},m=async a=>{if(a.preventDefault(),e.nuevaContrasena!==e.confirmarContrasena){i("Las contrase\xf1as nuevas no coinciden");return}let r=localStorage.getItem("token");try{await o.Z.post("/api/cambiar-contrasena",e,{headers:{Authorization:"Bearer ".concat(r)}}),u("âœ… Contrase\xf1a actualizada correctamente"),setTimeout(()=>d.push("/dashboard"),2e3)}catch(e){var n,t;i((null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.error)||"Error al cambiar contrase\xf1a")}};return(0,n.jsxs)("div",{children:[(0,n.jsx)(l.Z,{}),(0,n.jsxs)("div",{style:{padding:"2rem",maxWidth:"500px",margin:"0 auto"},children:[(0,n.jsx)("h2",{children:"Cambiar Contrase\xf1a"}),r&&(0,n.jsx)("p",{style:{color:"red"},children:r}),c&&(0,n.jsx)("p",{style:{color:"green"},children:c}),(0,n.jsxs)("form",{onSubmit:m,children:[(0,n.jsx)("div",{style:{marginBottom:"1rem"},children:(0,n.jsxs)("label",{children:["Contrase\xf1a Actual: ",(0,n.jsx)("input",{type:"password",name:"contrasenaActual",value:e.contrasenaActual,onChange:h,required:!0})]})}),(0,n.jsx)("div",{style:{marginBottom:"1rem"},children:(0,n.jsxs)("label",{children:["Nueva Contrase\xf1a: ",(0,n.jsx)("input",{type:"password",name:"nuevaContrasena",value:e.nuevaContrasena,onChange:h,required:!0})]})}),(0,n.jsx)("div",{style:{marginBottom:"1rem"},children:(0,n.jsxs)("label",{children:["Confirmar Nueva Contrase\xf1a: ",(0,n.jsx)("input",{type:"password",name:"confirmarContrasena",value:e.confirmarContrasena,onChange:h,required:!0})]})}),(0,n.jsx)("button",{type:"submit",style:{padding:"0.5rem 1rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Actualizar Contrase\xf1a"})]})]})]})}},1163:function(e,a,r){e.exports=r(9090)}},function(e){e.O(0,[66,888,774,179],function(){return e(e.s=5809)}),_N_E=e.O()}]);