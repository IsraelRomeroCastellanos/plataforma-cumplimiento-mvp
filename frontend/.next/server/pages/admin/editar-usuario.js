"use strict";(()=>{var e={};e.id=624,e.ids=[624,660],e.modules={6999:(e,r,a)=>{a.a(e,async(e,t)=>{try{a.r(r),a.d(r,{config:()=>x,default:()=>h,getServerSideProps:()=>g,getStaticPaths:()=>b,getStaticProps:()=>p,reportWebVitals:()=>v,routeModule:()=>P,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>C,unstable_getStaticParams:()=>S,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>f});var l=a(7093),s=a(5244),i=a(1323),n=a(2899),o=a.n(n),d=a(6958),c=a.n(d),u=a(3452),m=e([u]);u=(m.then?(await m)():m)[0];let h=(0,i.l)(u,"default"),p=(0,i.l)(u,"getStaticProps"),b=(0,i.l)(u,"getStaticPaths"),g=(0,i.l)(u,"getServerSideProps"),x=(0,i.l)(u,"config"),v=(0,i.l)(u,"reportWebVitals"),f=(0,i.l)(u,"unstable_getStaticProps"),j=(0,i.l)(u,"unstable_getStaticPaths"),S=(0,i.l)(u,"unstable_getStaticParams"),y=(0,i.l)(u,"unstable_getServerProps"),C=(0,i.l)(u,"unstable_getServerSideProps"),P=new l.PagesRouteModule({definition:{kind:s.x.PAGES,page:"/admin/editar-usuario",pathname:"/admin/editar-usuario",bundlePath:"",filename:""},components:{App:c(),Document:o()},userland:u});t()}catch(e){t(e)}})},5376:(e,r,a)=>{a.d(r,{Z:()=>i});var t=a(997),l=a(1163),s=a(6689);function i(){let[e,r]=(0,s.useState)(null),a=(0,l.useRouter)();if(!e)return null;let i=[];return"admin"===e.role?i.push({label:"Dashboard",href:"/dashboard"},{label:"Gesti\xf3n de Usuarios",href:"/admin/usuarios"},{label:"Gesti\xf3n de Empresas",href:"/admin/empresas"},{label:"Mis Clientes",href:"/cliente/clientes"},{label:"Carga Masiva",href:"/cliente/carga-masiva"},{label:"Barridos",href:"/admin/barridos"},{label:"Matrices de Riesgo",href:"/admin/matrices"},{label:"Cambiar Contrase\xf1a",href:"/cambiar-contrasena"}):"consultor"===e.role?i.push({label:"Dashboard",href:"/dashboard"},{label:"Empresas",href:"/consultor/empresas"},{label:"Mis Clientes",href:"/cliente/clientes"},{label:"Carga Masiva",href:"/cliente/carga-masiva"},{label:"Alertas",href:"/consultor/alertas"},{label:"Reportes",href:"/consultor/reportes"},{label:"Cambiar Contrase\xf1a",href:"/cambiar-contrasena"}):"cliente"===e.role&&i.push({label:"Dashboard",href:"/dashboard"},{label:"Mis Clientes",href:"/cliente/clientes"},{label:"Carga Masiva",href:"/cliente/carga-masiva"},{label:"Transacciones",href:"/cliente/transacciones"},{label:"Reportes",href:"/cliente/reportes"},{label:"Cambiar Contrase\xf1a",href:"/cambiar-contrasena"}),(0,t.jsxs)("nav",{style:{backgroundColor:"#1e40af",padding:"1rem",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("div",{children:t.jsx("h2",{style:{margin:0,fontSize:"1.2rem"},children:"admin"===e.role?"Consola Administrativa":"consultor"===e.role?"Panel Consultor":"Portal Cliente"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"0.9rem"},children:[e.email," (",e.role,")"]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[i.map(e=>t.jsx("button",{onClick:()=>a.push(e.href),style:{color:"white",background:"none",border:"none",cursor:"pointer",textDecoration:a.pathname===e.href?"underline":"none"},children:e.label},e.href)),t.jsx("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a.push("/login")},style:{color:"#f87171",background:"none",border:"none",cursor:"pointer"},children:"Cerrar Sesi\xf3n"})]})]})]})}},3452:(e,r,a)=>{a.a(e,async(e,t)=>{try{a.r(r),a.d(r,{default:()=>c});var l=a(997),s=a(6689),i=a(1163),n=a(9648),o=a(5376),d=e([n]);function c(){let[e,r]=(0,s.useState)({}),[a,t]=(0,s.useState)([]),[d,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[h,p]=(0,s.useState)(!0),b=(0,i.useRouter)(),{id:g}=b.query,x=async r=>{r.preventDefault();let a=localStorage.getItem("token");if(a)try{await n.default.put(`/api/admin/usuarios/${g}`,e,{headers:{Authorization:`Bearer ${a}`}}),m("Usuario actualizado correctamente"),setTimeout(()=>b.push("/admin/usuarios"),1500)}catch(e){c(e.response?.data?.error||"Error al actualizar usuario")}},v=e=>{let{name:a,value:t,type:l}=e.target,s="checkbox"===l?e.target.checked:t;r(e=>({...e,[a]:s}))};return h?(0,l.jsxs)("div",{children:[l.jsx(o.Z,{}),l.jsx("div",{style:{padding:"2rem"},children:"Cargando..."})]}):(0,l.jsxs)("div",{children:[l.jsx(o.Z,{}),(0,l.jsxs)("div",{style:{padding:"2rem"},children:[l.jsx("h1",{children:"Editar Usuario"}),d&&l.jsx("p",{style:{color:"red"},children:d}),u&&l.jsx("p",{style:{color:"green"},children:u}),(0,l.jsxs)("form",{onSubmit:x,children:[l.jsx("div",{style:{marginBottom:"1rem"},children:(0,l.jsxs)("label",{children:["Email: ",l.jsx("input",{name:"email",value:e.email||"",onChange:v,required:!0,style:{width:"100%",padding:"0.5rem"}})]})}),l.jsx("div",{style:{marginBottom:"1rem"},children:(0,l.jsxs)("label",{children:["Nombre Completo: ",l.jsx("input",{name:"nombre_completo",value:e.nombre_completo||"",onChange:v,required:!0,style:{width:"100%",padding:"0.5rem"}})]})}),l.jsx("div",{style:{marginBottom:"1rem"},children:(0,l.jsxs)("label",{children:["Rol:",(0,l.jsxs)("select",{name:"rol",value:e.rol||"",onChange:v,style:{width:"100%",padding:"0.5rem"},children:[l.jsx("option",{value:"",children:"Seleccionar"}),l.jsx("option",{value:"admin",children:"Administrador"}),l.jsx("option",{value:"consultor",children:"Consultor"}),l.jsx("option",{value:"cliente",children:"Cliente"})]})]})}),("consultor"===e.rol||"cliente"===e.rol)&&l.jsx("div",{style:{marginBottom:"1rem"},children:(0,l.jsxs)("label",{children:["Empresa:",(0,l.jsxs)("select",{name:"empresa_id",value:e.empresa_id||"",onChange:v,style:{width:"100%",padding:"0.5rem"},children:[l.jsx("option",{value:"",children:"Seleccionar"}),a.map(e=>l.jsx("option",{value:e.id,children:e.nombre_legal},e.id))]})]})}),l.jsx("div",{style:{marginBottom:"1rem"},children:(0,l.jsxs)("label",{children:[l.jsx("input",{type:"checkbox",name:"activo",checked:e.activo||!1,onChange:v}),"Activo"]})}),l.jsx("button",{type:"submit",style:{padding:"0.5rem 1rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Guardar Cambios"})]})]})]})}n=(d.then?(await d)():d)[0],t()}catch(e){t(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},9648:e=>{e.exports=import("axios")}};var r=require("../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[899,125],()=>a(6999));module.exports=t})();