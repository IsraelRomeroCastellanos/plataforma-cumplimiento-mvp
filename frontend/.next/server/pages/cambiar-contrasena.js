"use strict";(()=>{var e={};e.id=148,e.ids=[148,660],e.modules={7539:(e,a,r)=>{r.a(e,async(e,t)=>{try{r.r(a),r.d(a,{config:()=>f,default:()=>h,getServerSideProps:()=>g,getStaticPaths:()=>b,getStaticProps:()=>p,reportWebVitals:()=>x,routeModule:()=>P,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>S,unstable_getStaticPaths:()=>C,unstable_getStaticProps:()=>v});var s=r(7093),n=r(5244),o=r(1323),l=r(2899),i=r.n(l),c=r(6958),u=r.n(c),d=r(6057),m=e([d]);d=(m.then?(await m)():m)[0];let h=(0,o.l)(d,"default"),p=(0,o.l)(d,"getStaticProps"),b=(0,o.l)(d,"getStaticPaths"),g=(0,o.l)(d,"getServerSideProps"),f=(0,o.l)(d,"config"),x=(0,o.l)(d,"reportWebVitals"),v=(0,o.l)(d,"unstable_getStaticProps"),C=(0,o.l)(d,"unstable_getStaticPaths"),S=(0,o.l)(d,"unstable_getStaticParams"),j=(0,o.l)(d,"unstable_getServerProps"),y=(0,o.l)(d,"unstable_getServerSideProps"),P=new s.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/cambiar-contrasena",pathname:"/cambiar-contrasena",bundlePath:"",filename:""},components:{App:u(),Document:i()},userland:d});t()}catch(e){t(e)}})},5376:(e,a,r)=>{r.d(a,{Z:()=>o});var t=r(997),s=r(1163),n=r(6689);function o(){let[e,a]=(0,n.useState)(null),r=(0,s.useRouter)();if(!e)return null;let o=[];return"admin"===e.role?o.push({label:"Dashboard",href:"/dashboard"},{label:"Gesti\xf3n de Usuarios",href:"/admin/usuarios"},{label:"Gesti\xf3n de Empresas",href:"/admin/empresas"},{label:"Mis Clientes",href:"/cliente/clientes"},{label:"Carga Masiva",href:"/cliente/carga-masiva"},{label:"Barridos",href:"/admin/barridos"},{label:"Matrices de Riesgo",href:"/admin/matrices"},{label:"Cambiar Contrase\xf1a",href:"/cambiar-contrasena"}):"consultor"===e.role?o.push({label:"Dashboard",href:"/dashboard"},{label:"Empresas",href:"/consultor/empresas"},{label:"Mis Clientes",href:"/cliente/clientes"},{label:"Carga Masiva",href:"/cliente/carga-masiva"},{label:"Alertas",href:"/consultor/alertas"},{label:"Reportes",href:"/consultor/reportes"},{label:"Cambiar Contrase\xf1a",href:"/cambiar-contrasena"}):"cliente"===e.role&&o.push({label:"Dashboard",href:"/dashboard"},{label:"Mis Clientes",href:"/cliente/clientes"},{label:"Carga Masiva",href:"/cliente/carga-masiva"},{label:"Transacciones",href:"/cliente/transacciones"},{label:"Reportes",href:"/cliente/reportes"},{label:"Cambiar Contrase\xf1a",href:"/cambiar-contrasena"}),(0,t.jsxs)("nav",{style:{backgroundColor:"#1e40af",padding:"1rem",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("div",{children:t.jsx("h2",{style:{margin:0,fontSize:"1.2rem"},children:"admin"===e.role?"Consola Administrativa":"consultor"===e.role?"Panel Consultor":"Portal Cliente"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"0.9rem"},children:[e.email," (",e.role,")"]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[o.map(e=>t.jsx("button",{onClick:()=>r.push(e.href),style:{color:"white",background:"none",border:"none",cursor:"pointer",textDecoration:r.pathname===e.href?"underline":"none"},children:e.label},e.href)),t.jsx("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),r.push("/login")},style:{color:"#f87171",background:"none",border:"none",cursor:"pointer"},children:"Cerrar Sesi\xf3n"})]})]})]})}},6057:(e,a,r)=>{r.a(e,async(e,t)=>{try{r.r(a),r.d(a,{default:()=>u});var s=r(997),n=r(6689),o=r(1163),l=r(9648),i=r(5376),c=e([l]);function u(){let[e,a]=(0,n.useState)({contrasenaActual:"",nuevaContrasena:"",confirmarContrasena:""}),[r,t]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),d=(0,o.useRouter)(),m=e=>{let{name:r,value:t}=e.target;a(e=>({...e,[r]:t}))},h=async a=>{if(a.preventDefault(),e.nuevaContrasena!==e.confirmarContrasena){t("Las contrase\xf1as nuevas no coinciden");return}let r=localStorage.getItem("token");try{await l.default.post("/api/cambiar-contrasena",e,{headers:{Authorization:`Bearer ${r}`}}),u("âœ… Contrase\xf1a actualizada correctamente"),setTimeout(()=>d.push("/dashboard"),2e3)}catch(e){t(e.response?.data?.error||"Error al cambiar contrase\xf1a")}};return(0,s.jsxs)("div",{children:[s.jsx(i.Z,{}),(0,s.jsxs)("div",{style:{padding:"2rem",maxWidth:"500px",margin:"0 auto"},children:[s.jsx("h2",{children:"Cambiar Contrase\xf1a"}),r&&s.jsx("p",{style:{color:"red"},children:r}),c&&s.jsx("p",{style:{color:"green"},children:c}),(0,s.jsxs)("form",{onSubmit:h,children:[s.jsx("div",{style:{marginBottom:"1rem"},children:(0,s.jsxs)("label",{children:["Contrase\xf1a Actual: ",s.jsx("input",{type:"password",name:"contrasenaActual",value:e.contrasenaActual,onChange:m,required:!0})]})}),s.jsx("div",{style:{marginBottom:"1rem"},children:(0,s.jsxs)("label",{children:["Nueva Contrase\xf1a: ",s.jsx("input",{type:"password",name:"nuevaContrasena",value:e.nuevaContrasena,onChange:m,required:!0})]})}),s.jsx("div",{style:{marginBottom:"1rem"},children:(0,s.jsxs)("label",{children:["Confirmar Nueva Contrase\xf1a: ",s.jsx("input",{type:"password",name:"confirmarContrasena",value:e.confirmarContrasena,onChange:m,required:!0})]})}),s.jsx("button",{type:"submit",style:{padding:"0.5rem 1rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Actualizar Contrase\xf1a"})]})]})]})}l=(c.then?(await c)():c)[0],t()}catch(e){t(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},9648:e=>{e.exports=import("axios")}};var a=require("../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[899,125],()=>r(7539));module.exports=t})();