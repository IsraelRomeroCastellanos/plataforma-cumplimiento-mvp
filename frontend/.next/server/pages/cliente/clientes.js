"use strict";(()=>{var e={};e.id=360,e.ids=[360,660],e.modules={6030:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{config:()=>g,default:()=>u,getServerSideProps:()=>x,getStaticPaths:()=>m,getStaticProps:()=>b,reportWebVitals:()=>f,routeModule:()=>P,unstable_getServerProps:()=>C,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>v});var s=t(7093),i=t(5244),l=t(1323),n=t(2899),o=t.n(n),d=t(6958),c=t.n(d),p=t(2689),h=e([p]);p=(h.then?(await h)():h)[0];let u=(0,l.l)(p,"default"),b=(0,l.l)(p,"getStaticProps"),m=(0,l.l)(p,"getStaticPaths"),x=(0,l.l)(p,"getServerSideProps"),g=(0,l.l)(p,"config"),f=(0,l.l)(p,"reportWebVitals"),v=(0,l.l)(p,"unstable_getStaticProps"),j=(0,l.l)(p,"unstable_getStaticPaths"),y=(0,l.l)(p,"unstable_getStaticParams"),C=(0,l.l)(p,"unstable_getServerProps"),S=(0,l.l)(p,"unstable_getServerSideProps"),P=new s.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/cliente/clientes",pathname:"/cliente/clientes",bundlePath:"",filename:""},components:{App:c(),Document:o()},userland:p});a()}catch(e){a(e)}})},5376:(e,r,t)=>{t.d(r,{Z:()=>l});var a=t(997),s=t(1163),i=t(6689);function l(){let[e,r]=(0,i.useState)(null),t=(0,s.useRouter)();if(!e)return null;let l=[];return"admin"===e.role?l.push({label:"Dashboard",href:"/dashboard"},{label:"Gesti\xf3n de Usuarios",href:"/admin/usuarios"},{label:"Gesti\xf3n de Empresas",href:"/admin/empresas"},{label:"Mis Clientes",href:"/cliente/clientes"},{label:"Carga Masiva",href:"/cliente/carga-masiva"},{label:"Barridos",href:"/admin/barridos"},{label:"Matrices de Riesgo",href:"/admin/matrices"},{label:"Cambiar Contrase\xf1a",href:"/cambiar-contrasena"}):"consultor"===e.role?l.push({label:"Dashboard",href:"/dashboard"},{label:"Empresas",href:"/consultor/empresas"},{label:"Mis Clientes",href:"/cliente/clientes"},{label:"Carga Masiva",href:"/cliente/carga-masiva"},{label:"Alertas",href:"/consultor/alertas"},{label:"Reportes",href:"/consultor/reportes"},{label:"Cambiar Contrase\xf1a",href:"/cambiar-contrasena"}):"cliente"===e.role&&l.push({label:"Dashboard",href:"/dashboard"},{label:"Mis Clientes",href:"/cliente/clientes"},{label:"Carga Masiva",href:"/cliente/carga-masiva"},{label:"Transacciones",href:"/cliente/transacciones"},{label:"Reportes",href:"/cliente/reportes"},{label:"Cambiar Contrase\xf1a",href:"/cambiar-contrasena"}),(0,a.jsxs)("nav",{style:{backgroundColor:"#1e40af",padding:"1rem",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("div",{children:a.jsx("h2",{style:{margin:0,fontSize:"1.2rem"},children:"admin"===e.role?"Consola Administrativa":"consultor"===e.role?"Panel Consultor":"Portal Cliente"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"0.9rem"},children:[e.email," (",e.role,")"]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[l.map(e=>a.jsx("button",{onClick:()=>t.push(e.href),style:{color:"white",background:"none",border:"none",cursor:"pointer",textDecoration:t.pathname===e.href?"underline":"none"},children:e.label},e.href)),a.jsx("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t.push("/login")},style:{color:"#f87171",background:"none",border:"none",cursor:"pointer"},children:"Cerrar Sesi\xf3n"})]})]})]})}},2689:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{default:()=>c});var s=t(997),i=t(6689),l=t(1163),n=t(9648),o=t(5376),d=e([n]);function c(){let[e,r]=(0,i.useState)([]),[t,a]=(0,i.useState)(""),[d,c]=(0,i.useState)(!0),p=(0,l.useRouter)(),[h,u]=(0,i.useState)(null),b=async(e,t)=>{if("admin"!==h)return;let s="activo"===t?"inactivo":"activo",i=localStorage.getItem("token");try{await n.default.put(`/api/cliente/${e}/estado`,{estado:s},{headers:{Authorization:`Bearer ${i}`}}),r(r=>r.map(r=>r.id===e?{...r,estado:s}:r))}catch(e){a(e.response?.data?.error||"Error al actualizar estado")}};return d?(0,s.jsxs)("div",{children:[s.jsx(o.Z,{}),s.jsx("div",{style:{padding:"2rem"},children:"Cargando..."})]}):(0,s.jsxs)("div",{children:[s.jsx(o.Z,{}),(0,s.jsxs)("div",{style:{padding:"2rem",fontFamily:"sans-serif"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[s.jsx("h1",{children:"Mis Clientes"}),(0,s.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsx("button",{onClick:()=>p.push("/cliente/registrar"),style:{padding:"0.5rem 1rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Registrar Cliente"}),s.jsx("button",{onClick:()=>p.push("/cliente/carga-masiva"),style:{padding:"0.5rem 1rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Carga Masiva"})]})]}),t&&s.jsx("p",{style:{color:"red",marginBottom:"1rem"},children:t}),0===e.length?s.jsx("p",{children:"No se encontraron clientes."}):(0,s.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ccc"},children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{children:[s.jsx("th",{style:{border:"1px solid #ccc",padding:"0.5rem"},children:"ID"}),s.jsx("th",{style:{border:"1px solid #ccc",padding:"0.5rem"},children:"Nombre"}),s.jsx("th",{style:{border:"1px solid #ccc",padding:"0.5rem"},children:"Tipo"}),s.jsx("th",{style:{border:"1px solid #ccc",padding:"0.5rem"},children:"Actividad"}),s.jsx("th",{style:{border:"1px solid #ccc",padding:"0.5rem"},children:"Estado"}),s.jsx("th",{style:{border:"1px solid #ccc",padding:"0.5rem"},children:"Acciones"})]})}),s.jsx("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{children:[s.jsx("td",{style:{border:"1px solid #ccc",padding:"0.5rem"},children:e.id}),s.jsx("td",{style:{border:"1px solid #ccc",padding:"0.5rem"},children:e.nombre_entidad}),s.jsx("td",{style:{border:"1px solid #ccc",padding:"0.5rem"},children:e.tipo_cliente}),s.jsx("td",{style:{border:"1px solid #ccc",padding:"0.5rem"},children:e.actividad_economica}),s.jsx("td",{style:{border:"1px solid #ccc",padding:"0.5rem"},children:"activo"===e.estado?"✅":"❌"}),s.jsx("td",{style:{border:"1px solid #ccc",padding:"0.5rem"},children:"admin"===h&&s.jsx("button",{style:{padding:"0.25rem 0.5rem",backgroundColor:"activo"===e.estado?"#ef4444":"#10b981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},onClick:()=>b(e.id,e.estado),children:"activo"===e.estado?"Desactivar":"Activar"})})]},e.id))})]})]})]})}n=(d.then?(await d)():d)[0],a()}catch(e){a(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},9648:e=>{e.exports=import("axios")}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[899,125],()=>t(6030));module.exports=a})();